# 川内薬剤師会 お知らせ自動更新システム セットアップガイド

## 概要
Google DriveにアップロードされたPDFファイルを自動的にWebサイトのお知らせ欄に反映するシステムです。

## 必要なもの
- Googleアカウント
- Google Drive
- Google Apps Script

## セットアップ手順

### 1. Google Driveフォルダの準備

1. Google Driveで「川内薬剤師会_お知らせ」フォルダを作成
2. フォルダを右クリック → 「共有」→ 「リンクを知っている全員」に設定
3. フォルダのURLからフォルダIDを取得
   ```
   https://drive.google.com/drive/folders/【ここがフォルダID】
   ```

### 2. Google Apps Scriptプロジェクトの作成

1. [Google Apps Script](https://script.google.com/) にアクセス
2. 「新しいプロジェクト」をクリック
3. プロジェクト名を「川内薬剤師会お知らせ自動更新」に変更
4. `gas-news-automation.js` の内容をコピー&ペースト
5. `CONFIG.NEWS_FOLDER_ID` に取得したフォルダIDを設定

### 3. Webアプリとしてデプロイ

1. GASエディタで「デプロイ」→ 「新しいデプロイ」
2. 種類を「ウェブアプリ」に選択
3. 設定：
   - 説明: 「お知らせ自動更新API」
   - 次のユーザーとして実行: 「自分」
   - アクセスできるユーザー: 「全員」
4. 「デプロイ」をクリック
5. WebアプリのURLをコピー

### 4. Webサイトの設定

1. `index.html` の `GAS_URL` を実際のWebアプリURLに変更
2. 自動更新を有効にする場合は、コメントアウトを解除：
   ```javascript
   // loadNewsFromGAS(); → loadNewsFromGAS();
   ```

## ファイル命名規則

お知らせファイルは以下の命名規則に従ってください：

### 推奨形式
```
YYYY-MM-DD_タイトル.pdf
例: 2024-01-15_薬剤師研修会のご案内.pdf
```

### サポートされるファイル形式
- PDF (.pdf)
- Word文書 (.doc, .docx)
- テキストファイル (.txt)

### タイトル例
- `2024-01-15_令和6年度薬剤師研修会のご案内.pdf`
- `2024-01-10_年末年始の休日当番薬局について.pdf`
- `2024-01-08_インフルエンザ予防接種実施薬局一覧.pdf`
- `2024-01-05_薬局における在宅医療推進事業について.pdf`
- `2024-01-03_新型コロナウイルス感染症対策ガイドライン更新.pdf`

## 運用方法

### 新しいお知らせの追加
1. Google Driveの指定フォルダにPDFファイルをアップロード
2. ファイル名は命名規則に従って設定
3. 数分後にWebサイトに自動反映

### お知らせの削除
1. Google Driveからファイルを削除
2. 数分後にWebサイトから自動削除

### 表示順序
- 最新のファイル（更新日時順）が上に表示
- 最大5件まで表示（設定で変更可能）

## トラブルシューティング

### お知らせが表示されない場合
1. GASのログを確認
2. フォルダIDが正しく設定されているか確認
3. ファイルの共有設定を確認

### ファイルが開けない場合
1. Google Driveでファイルの共有設定を確認
2. 「リンクを知っている全員」に設定されているか確認

## セキュリティ注意事項
- Google Driveのファイルは一般公開されます
- 機密情報を含むファイルはアップロードしないでください
- 定期的にアクセス権限を確認してください

## カスタマイズ

### 表示件数の変更
`gas-news-automation.js` の `MAX_NEWS_COUNT` を変更

### 対応ファイル形式の追加
`SUPPORTED_FORMATS` 配列に拡張子を追加

### 表示スタイルの変更
`css/style.css` の `.news-list` スタイルを編集 