<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>過去の記事一覧 | 川内薬剤師会</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <div class="header-container">
      <img src="img/SPA.png" alt="一般社団法人川内薬剤師会ロゴ" class="header-logo-large">
      <div class="header-title-group-row">
        <h1 class="main-title"><a href="index.html" style="color:inherit;text-decoration:none;">一般社団法人川内薬剤師会</a></h1>
        <div class="sub-title">Sendai Pharmaceutical Association</div>
      </div>
    </div>
    <nav class="global-nav">
      <ul>
        <li><a href="index.html">HOME</a></li>
        <li class="has-submenu">
          <a href="about.html">組織概要</a>
          <ul class="submenu">
            <li><a href="greeting.html">会長あいさつ</a></li>
            <li><a href="officers.html">役員一覧</a></li>
            <li><a href="rules.html">定款</a></li>
          </ul>
        </li>
        <li><a href="pharmacy-list.html">薬局一覧</a></li>
        <li><a href="fax.html">FAXコーナー</a></li>
        <li><a href="contact.html">事務局</a></li>
      </ul>
    </nav>
  </header>
  
  <button id="sidebar-toggle">
    <div class="arrow-toggle">▶</div>
  </button>
  
  <div class="container">
    <div class="sidebar-wrapper">
      <nav class="sidebar">
        <ul>
          <li style="visibility:hidden;">ダミー</li>
          <li><a href="holiday.html">休日当番</a></li>
          <li><a href="night.html">夜間輪番</a></li>
          <li><a href="homecare.html">在宅可能薬局リスト</a></li>
          <li><a href="frail.html">フレイル予防講座</a></li>
          <li><a href="search.html">薬局検索</a></li>
          <li><a href="school.html">学校薬剤師</a></li>
          <li><a href="disaster.html">災害対策</a></li>
          <li><a href="collab.html">薬薬連携</a></li>
          <li><a href="workshop.html">研修会</a></li>
          <li><a href="kagonet.html">カゴネット</a></li>
          <li><a href="koshiki.html">甑島医療調査</a></li>
        </ul>
      </nav>
    </div>
    <div class="sidebar-overlay"></div>
    <div class="main-content">
      <section>
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 2rem;">
          <h2 style="margin: 0;">過去の記事一覧</h2>
          <a href="index.html" style="color: #2c3e50; text-decoration: none; font-size: 0.9rem;">← 最新のお知らせに戻る</a>
        </div>
        
        <p style="margin-bottom: 2rem; color: #666; line-height: 1.6;">
          川内薬剤師会の過去のお知らせ・ご案内を年度ごとにご覧いただけます。
        </p>
        
        <!-- 年度選択タブ -->
        <div class="year-tabs" style="margin-bottom: 2rem;">
          <button class="year-tab active" data-year="2024" style="background: #2c3e50; color: #fff; border: none; padding: 10px 20px; margin-right: 5px; border-radius: 4px; cursor: pointer;">令和6年度(2024)</button>
          <button class="year-tab" data-year="2023" style="background: #ecf0f1; color: #2c3e50; border: none; padding: 10px 20px; margin-right: 5px; border-radius: 4px; cursor: pointer;">令和5年度(2023)</button>
          <button class="year-tab" data-year="2022" style="background: #ecf0f1; color: #2c3e50; border: none; padding: 10px 20px; margin-right: 5px; border-radius: 4px; cursor: pointer;">令和4年度(2022)</button>
        </div>
        
        <div style="background: #fff; border: 1px solid #ddd; border-radius: 8px; padding: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
          <!-- 令和6年度(2024) -->
          <div id="news-2024" class="year-content">
            <h3 style="color: #2c3e50; margin-bottom: 1.5rem; border-bottom: 2px solid #3498db; padding-bottom: 0.5rem;">令和6年度(2024年)</h3>
            <div class="news-list-full">
              <div class="news-item">
                <div class="news-date">2024.01.15</div>
                <div class="news-content">
                  <h3><a href="#" data-file-id="sample1" target="_blank">令和6年度 薬剤師研修会のご案内</a></h3>
                  <p>令和6年度の薬剤師研修会を開催いたします。詳細は添付資料をご確認ください。</p>
                </div>
              </div>
              
              <div class="news-item">
                <div class="news-date">2024.01.10</div>
                <div class="news-content">
                  <h3><a href="#" data-file-id="sample2" target="_blank">年末年始の休日当番薬局について</a></h3>
                  <p>年末年始期間中の休日当番薬局の一覧をお知らせいたします。</p>
                </div>
              </div>
              
              <div class="news-item">
                <div class="news-date">2024.01.08</div>
                <div class="news-content">
                  <h3><a href="#" data-file-id="sample3" target="_blank">インフルエンザ予防接種実施薬局一覧</a></h3>
                  <p>インフルエンザ予防接種を実施している薬局の一覧を更新いたしました。</p>
                </div>
              </div>
              
              <div class="news-item">
                <div class="news-date">2024.01.05</div>
                <div class="news-content">
                  <h3><a href="#" data-file-id="sample4" target="_blank">薬局における在宅医療推進事業について</a></h3>
                  <p>在宅医療推進事業に関する新しいガイドラインをお知らせいたします。</p>
                </div>
              </div>
              
              <div class="news-item">
                <div class="news-date">2024.01.03</div>
                <div class="news-content">
                  <h3><a href="#" data-file-id="sample5" target="_blank">新型コロナウイルス感染症対策ガイドライン更新</a></h3>
                  <p>新型コロナウイルス感染症対策ガイドラインを最新版に更新いたしました。</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 令和5年度(2023) -->
          <div id="news-2023" class="year-content" style="display: none;">
            <h3 style="color: #2c3e50; margin-bottom: 1.5rem; border-bottom: 2px solid #3498db; padding-bottom: 0.5rem;">令和5年度(2023年)</h3>
            <div class="news-list-full">
              <div class="news-item">
                <div class="news-date">2023.12.28</div>
                <div class="news-content">
                  <h3><a href="#" data-file-id="sample6" target="_blank">年末年始休業のお知らせ</a></h3>
                  <p>年末年始の休業期間についてお知らせいたします。</p>
                </div>
              </div>
              
              <div class="news-item">
                <div class="news-date">2023.12.20</div>
                <div class="news-content">
                  <h3><a href="#" data-file-id="sample7" target="_blank">薬剤師会忘年会開催のご案内</a></h3>
                  <p>令和5年度薬剤師会忘年会を開催いたします。</p>
                </div>
              </div>
              
              <div class="news-item">
                <div class="news-date">2023.11.15</div>
                <div class="news-content">
                  <h3><a href="#" data-file-id="sample8" target="_blank">令和5年度第2回研修会開催のご案内</a></h3>
                  <p>令和5年度第2回研修会を開催いたします。多数のご参加をお待ちしております。</p>
                </div>
              </div>
              
              <div class="news-item">
                <div class="news-date">2023.10.20</div>
                <div class="news-content">
                  <h3><a href="#" data-file-id="sample9" target="_blank">インフルエンザワクチン接種について</a></h3>
                  <p>インフルエンザワクチン接種に関するお知らせです。</p>
                </div>
              </div>
              
              <div class="news-item">
                <div class="news-date">2023.09.15</div>
                <div class="news-content">
                  <h3><a href="#" data-file-id="sample10" target="_blank">薬局機能情報公表制度について</a></h3>
                  <p>薬局機能情報公表制度に関する更新情報をお知らせいたします。</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 令和4年度(2022) -->
          <div id="news-2022" class="year-content" style="display: none;">
            <h3 style="color: #2c3e50; margin-bottom: 1.5rem; border-bottom: 2px solid #3498db; padding-bottom: 0.5rem;">令和4年度(2022年)</h3>
            <div class="news-list-full">
              <div class="news-item">
                <div class="news-date">2022.12.25</div>
                <div class="news-content">
                  <h3><a href="#" data-file-id="sample11" target="_blank">年末年始の業務について</a></h3>
                  <p>令和4年度年末年始の業務体制についてお知らせいたします。</p>
                </div>
              </div>
              
              <div class="news-item">
                <div class="news-date">2022.11.10</div>
                <div class="news-content">
                  <h3><a href="#" data-file-id="sample12" target="_blank">薬剤師会創立記念式典開催報告</a></h3>
                  <p>薬剤師会創立記念式典を開催いたしました。ご参加ありがとうございました。</p>
                </div>
              </div>
              
              <div class="news-item">
                <div class="news-date">2022.10.05</div>
                <div class="news-content">
                  <h3><a href="#" data-file-id="sample13" target="_blank">災害時医療体制の強化について</a></h3>
                  <p>災害時における医療体制の強化に関する取り組みについてお知らせいたします。</p>
                </div>
              </div>
            </div>
          </div>
          
          <div id="loading" style="text-align: center; padding: 2rem; display: none;">
            <p>記事を読み込み中...</p>
          </div>
          
          <div id="no-news" style="text-align: center; padding: 2rem; display: none;">
            <p>該当する記事はありません。</p>
          </div>
        </div>
      </section>
    </div>
  </div>
  
  <footer>
    <div class="footer-global-nav">
      <div class="footer-cards">
        <a class="footer-card" href="https://kayaku.jp/" target="_blank">鹿児島県薬剤師会</a>
        <a class="footer-card" href="https://www.nichiyaku.or.jp/" target="_blank">日本薬剤師会</a>
      </div>
      <div class="footer-office-info">
        <p>〒895-0027<br>薩摩川内市西向田町17-11<br>TEL：0996(41)5019　FAX：0996(22)4449</p>
      </div>
    </div>
    <div class="copyright">&copy; 一般社団法人川内薬剤師会</div>
  </footer>
  
  <script>
    // グローバルナビのサブメニュー制御
    document.addEventListener('DOMContentLoaded', function() {
      const hasSubmenuItems = document.querySelectorAll('.has-submenu');
      hasSubmenuItems.forEach(item => {
        const link = item.querySelector('a');
        const submenu = item.querySelector('.submenu');
        
        item.addEventListener('mouseenter', function() {
          item.classList.add('submenu-open');
        });
        
        item.addEventListener('mouseleave', function() {
          item.classList.remove('submenu-open');
        });
      });
    });
    
    // サイドバー制御
    console.log("sidebar.js loaded");
    
    function waitForSidebarAndInit() {
      const btn = document.getElementById('sidebar-toggle');
      const arrow = btn.querySelector('.arrow-toggle');
      const sidebar = document.querySelector('.sidebar');
      const overlay = document.querySelector('.sidebar-overlay');
      if (btn && sidebar && overlay) {
        // 現在ページにactiveクラスを付与
        const links = document.querySelectorAll('.sidebar a');
        const path = location.pathname.split('/').pop().replace(/\?.*$/, '');
        links.forEach(link => {
          if (link.getAttribute('href').replace(/\.html$/, '') === path.replace(/\.html$/, '')) {
            link.classList.add('active');
          }
        });
        
        btn.addEventListener('click', function() {
          sidebar.classList.toggle('open');
          overlay.style.display = sidebar.classList.contains('open') ? 'block' : 'none';
          arrow.textContent = sidebar.classList.contains('open') ? '◀' : '▶';
          arrow.classList.toggle('active', sidebar.classList.contains('open'));
        });
        
        overlay.addEventListener('click', function() {
          sidebar.classList.remove('open');
          overlay.style.display = 'none';
          arrow.textContent = '▶';
          arrow.classList.remove('active');
        });
      } else {
        setTimeout(waitForSidebarAndInit, 50);
      }
    }
    waitForSidebarAndInit();
    
    // 年度タブ切り替え機能
    document.addEventListener('DOMContentLoaded', function() {
      const yearTabs = document.querySelectorAll('.year-tab');
      const yearContents = document.querySelectorAll('.year-content');
      
      yearTabs.forEach(tab => {
        tab.addEventListener('click', function() {
          const targetYear = this.getAttribute('data-year');
          
          // タブのアクティブ状態を切り替え
          yearTabs.forEach(t => {
            t.style.background = '#ecf0f1';
            t.style.color = '#2c3e50';
          });
          this.style.background = '#2c3e50';
          this.style.color = '#fff';
          
          // コンテンツの表示を切り替え
          yearContents.forEach(content => {
            content.style.display = 'none';
          });
          document.getElementById('news-' + targetYear).style.display = 'block';
        });
      });
    });
    
    // GAS連携での年度別記事取得（将来の拡張用）
    async function loadNewsByYear(year) {
      try {
        const GAS_URL = 'https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec';
        const response = await fetch(`${GAS_URL}?year=${year}`);
        const newsData = await response.json();
        
        if (newsData && newsData.length > 0) {
          updateYearNewsList(year, newsData);
        }
      } catch (error) {
        console.log(`${year}年度の記事取得に失敗しました:`, error);
      }
    }
    
    function updateYearNewsList(year, newsData) {
      const yearContent = document.getElementById(`news-${year}`);
      if (!yearContent) return;
      
      const newsList = yearContent.querySelector('.news-list-full');
      if (!newsList) return;
      
      newsList.innerHTML = newsData.map(news => `
        <div class="news-item">
          <div class="news-date">${news.date}</div>
          <div class="news-content">
            <h3><a href="${news.url}" data-file-id="${news.fileId}" target="_blank">${news.title}</a></h3>
            <p>ファイルサイズ: ${formatFileSize(news.size)} | 形式: ${getFileTypeLabel(news.mimeType)}</p>
          </div>
        </div>
      `).join('');
    }
    
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
    
    function getFileTypeLabel(mimeType) {
      const types = {
        'application/pdf': 'PDF',
        'application/msword': 'Word',
        'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'Word',
        'text/plain': 'テキスト'
      };
      return types[mimeType] || 'ファイル';
    }
  </script>
</body>
</html> 